# 概述

一组 SQL 语句要么完全执行，要么完全不执行，来维护数据库的完整性。

# 事务控制

```sql
BEGIN TRANSACTION  
...  
COMMIT TRANSACTION
```

`BEGIN TRANSACTION` 和 `COMMIT TRANSACTION` 语句之间的 SQL 必须完全执行或者完全不执行。


## 使用 ROLLBACK 

`ROLLBACK` 表示**回滚**，用来回退事务的所有操作。

```sql
DELETE FROM Orders;

ROLLBACK;
```

## 使用 COMMIT

`COMMIT` 表示**提交**，用来提交事务的所有操作。 

```sql
BEGIN TRANSACTION
DELETE OrderItems WHERE order_num = 12345
DELETE Orders WHERE order_num = 12345
COMMIT TRANSACTION
```

## 使用保留点

使用简单的 `ROLLBACK` 和 `COMMIT` 语句，就可以写入或撤销整个事务。但是，只对简单的事务才能这样做，复杂的事务可能需要部分提交或回退。

```sql
SAVEPOINT delete1;
```

# 事务的ACID特性

## 原子性

事务包含的操作要么都做，要么都不做。

## 一致性

事务执行的结果必须是使数据库从一个一致性状态变到另一个一 致性状态。

## 隔离性

一个事务的执行不能被其他事务干扰 

## 持 续 性

一个事务一旦提交，它对数据库中数据的改变就应该是永久性的。